name: Run Tests

on: [push, pull_request]

jobs:
  test-solutions:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Set up Java
        if: ${{ contains(fromJSON('["java", "cpp", "c", "py"]'), github.event.pull_request.head.ref) }}
        uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: Compile and Run Java Tests
        if: "[[ -n $(ls solutions/*.java 2>/dev/null) ]]"
        run: |
          javac -d . solutions/Solution.java tests/Test.java
          java tests.Test

      - name: Compile and Run C Tests
        if: "[[ -n $(ls solutions/*.c 2>/dev/null) ]]"
        run: |
          gcc solutions/solution.c tests/test.c -o test_c
          ./test_c

      - name: Compile and Run C++ Tests
        if: "[[ -n $(ls solutions/*.cpp 2>/dev/null) ]]"
        run: |
          g++ solutions/solution.cpp tests/test.cpp -o test_cpp
          ./test_cpp

      - name: Run Python Tests
        if: "[[ -n $(ls solutions/*.py 2>/dev/null) ]]"
        run: python3 tests/test.py
